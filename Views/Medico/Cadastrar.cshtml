@model dynamic

@{
    Layout = "_LayoutAdmin";
    ViewData["Title"] = "Cadastrar Pessoal Clínico";
    
    // =========================================================
    // VARIÁVEIS DE EXEMPLO PARA TESTE DE LAYOUT (REMOVER DEPOIS)
    // =========================================================
    
    // 1. Dados da Pessoa (Simulam o PessoalClinicoViewModel)
    // Usados para 'asp-for' e 'asp-route-id' (embora o ID deva ser 0 para Criação)
    var pessoaExemplo = new { 
        IdPessoalClinico = 0, 
        Nome = "Exemplo Clínico", 
        Email = "exemplo@teste.com", 
        DataNascimento = DateTime.Now.Date,
        Telefone = "911 123 456",
        Cargo = "Médico",
        IdEspecialidade = 2, // Seleciona Pediatria
        NumeroCedula = "01234/ME",
        Morada = "Rua do Teste, 123",
        CodigoPostal = "1000-001",
        Localidade = "Luanda",
        Ativo = true 
    };

    // 2. Lista de Especialidades (Simula o Dropdown)
    var listaEspecialidadesExemplo = new List<dynamic>
    {
        new { IdEspecialidade = 1, Descricao = "Cardiologia" },
        new { IdEspecialidade = 2, Descricao = "Pediatria" },
        new { IdEspecialidade = 3, Descricao = "Geral e Familiar" },
        new { IdEspecialidade = 4, Descricao = "Radiologia" }
    };
    
    // Definição das listas de cargos (opcional)
    var listaCargos = new List<string> { "Médico", "Enfermeiro", "Técnico", "Administrativo" };

}

@section Styles {
    <link href="~/css/pessoalClinico.css" rel="stylesheet" />
}

<div class="content-wrapper">
    <div class="data-table-card">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <i class="bi bi-person-plus-fill me-2"></i> Adicionar Pessoal Clínico
                </h5>
            </div>
            
            <div class="card-body">
                @* Usamos o nome da propriedade do Model (ex: Nome) mas o Tag Helper
                   não consegue fazer o binding sem a classe real. A validação 
                   também não funcionará corretamente sem o ViewModel.
                   Isto é apenas para fins de layout.
                *@
                <form asp-action="Criar" asp-controller="PessoalClinico" method="post">
                    
                    @* --- SEÇÃO: DADOS PESSOAIS E CREDENCIAIS --- *@
                    <h6 class="text-primary mb-3"><i class="bi bi-person-vcard me-2"></i> Dados de Acesso e Pessoais</h6>
                    <div class="row g-3 mb-4">
                        
                        @* Nome *@
                        <div class="col-md-6">
                            <label for="Nome" class="form-label">Nome Completo</label>
                            <input name="Nome" id="Nome" type="text" class="form-control" 
                                   placeholder="Nome do Médico/Enfermeiro" value="@pessoaExemplo.Nome" />
                            <span class="text-danger"></span> @* Simula a validação *@
                        </div>
                        
                        @* Email (para login) *@
                        <div class="col-md-6">
                            <label for="Email" class="form-label">Email de Acesso</label>
                            <input name="Email" id="Email" type="email" class="form-control" 
                                   placeholder="exemplo@hospital.ao" value="@pessoaExemplo.Email" />
                            <span class="text-danger"></span>
                        </div>
                        
                        @* Data de Nascimento *@
                        <div class="col-md-4">
                            <label for="DataNascimento" class="form-label">Data de Nascimento</label>
                            <input name="DataNascimento" id="DataNascimento" type="date" class="form-control" 
                                   value="@pessoaExemplo.DataNascimento.ToString("yyyy-MM-dd")" />
                            <span class="text-danger"></span>
                        </div>
                        
                        @* Telefone *@
                        <div class="col-md-4">
                            <label for="Telefone" class="form-label">Telefone</label>
                            <input name="Telefone" id="Telefone" type="tel" class="form-control" 
                                   placeholder="+244 9XX XXX XXX" value="@pessoaExemplo.Telefone" />
                            <span class="text-danger"></span>
                        </div>

                        @* Cargo *@
                        <div class="col-md-4">
                            <label for="Cargo" class="form-label">Cargo</label>
                            @* Dropdown simples para teste *@
                            <select name="Cargo" id="Cargo" class="form-select">
                                <option value="" selected>Selecione o Cargo</option>
                                @foreach (var cargo in listaCargos)
                                {
                                    <option value="@cargo" selected="@(cargo == pessoaExemplo.Cargo)">@cargo</option>
                                }
                            </select>
                            <span class="text-danger"></span>
                        </div>

                    </div>

                    <hr class="mb-4" />

                    @* --- SEÇÃO: DADOS PROFISSIONAIS E ENDEREÇO --- *@
                    <h6 class="text-primary mb-3"><i class="bi bi-hospital-fill me-2"></i> Dados Profissionais e Endereço</h6>
                    <div class="row g-3 mb-4">

                        @* idUtilizador (Oculto - Campo da Tabela) *@
                        <input name="IdUtilizador" type="hidden" value="1" />

                        @* idEspecialidade (Dropdown) *@
                        <div class="col-md-6">
                            <label for="IdEspecialidade" class="form-label">Especialidade</label>
                            @* Dropdown Simulado: Usa listaEspecialidadesExemplo *@
                            <select name="IdEspecialidade" id="IdEspecialidade" class="form-select">
                                <option value="">Selecione a Especialidade</option>
                                @foreach (var especialidade in listaEspecialidadesExemplo)
                                {
                                    // Compara se o IdEspecialidade de exemplo é igual para selecionar
                                    <option value="@especialidade.IdEspecialidade" 
                                            selected="@(especialidade.IdEspecialidade == pessoaExemplo.IdEspecialidade)">
                                        @especialidade.Descricao
                                    </option>
                                }
                            </select>
                            <span class="text-danger"></span>
                        </div>
                        
                        @* Número da Cédula *@
                        <div class="col-md-6">
                            <label for="NumeroCedula" class="form-label">Nº Cédula Profissional</label>
                            <input name="NumeroCedula" id="NumeroCedula" type="text" class="form-control" 
                                   placeholder="Apenas para Médicos/Enfermeiros" value="@pessoaExemplo.NumeroCedula" />
                            <span class="text-danger"></span>
                        </div>

                        @* Morada *@
                        <div class="col-12">
                            <label for="Morada" class="form-label">Morada</label>
                            <input name="Morada" id="Morada" type="text" class="form-control" 
                                   placeholder="Rua, Bairro e Número" value="@pessoaExemplo.Morada" />
                            <span class="text-danger"></span>
                        </div>
                        
                        @* Código Postal *@
                        <div class="col-md-6">
                            <label for="CodigoPostal" class="form-label">Código Postal</label>
                            <input name="CodigoPostal" id="CodigoPostal" type="text" class="form-control" 
                                   placeholder="Ex: 1000-001" value="@pessoaExemplo.CodigoPostal" />
                            <span class="text-danger"></span>
                        </div>
                        
                        @* Localidade *@
                        <div class="col-md-6">
                            <label for="Localidade" class="form-label">Localidade</label>
                            <input name="Localidade" id="Localidade" type="text" class="form-control" 
                                   placeholder="Cidade ou Município" value="@pessoaExemplo.Localidade" />
                            <span class="text-danger"></span>
                        </div>
                        
                        @* Ativo *@
                        <div class="col-12 mt-4">
                             <div class="form-check">
                                <input name="Ativo" id="Ativo" type="checkbox" class="form-check-input" 
                                       checked="@pessoaExemplo.Ativo" />
                                <label for="Ativo" class="form-check-label">Conta Ativa (Pode fazer login)</label>
                            </div>
                        </div>

                    </div>

                    <hr class="mb-4" />

                    @* --- BOTÕES DE AÇÃO --- *@
                    <div class="d-flex gap-2 justify-content-end">
                        <button type="submit" class="btn btn-success btn-lg">
                            <i class="bi bi-save me-2"></i> Registar Pessoal Clínico
                        </button>
                        
                        <a asp-action="Listar" asp-controller="Medico" class="btn btn-secondary btn-lg">
                            <i class="bi bi-x-circle me-2"></i> Cancelar
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>