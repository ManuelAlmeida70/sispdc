@model SisPDC.DTOs.UtenteDTO

@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registo de Utente | Sistema Hospitalar</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLMDJ87tFpWJofv8S4/kP1s0qP+T8B7JpP1fD2yM6N6G/MvL1x0TqQ2R+h0F0F0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* Estilos Personalizados */
        body {
            /* Fundo Azul Claro */
            background-color: #f0f8ff;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: Arial, sans-serif;
            padding: 15px 0;
        }

        .register-card {
            /* Cartão Branco com Sombra */
            background-color: #ffffff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            max-width: 700px;
            width: 95%;
            position: relative; /* Necessário para posicionar o X absoluto, se desejado */
        }

        /* NOVO ESTILO: Botão X discreto no topo */
        .close-btn-top {
            position: absolute;
            top: 15px;
            left: 15px;
            font-size: 1.5rem;
            color: #6c757d; /* Cor cinza sutil */
            transition: color 0.2s;
            z-index: 10;
        }

            .close-btn-top:hover {
                color: #dc3545; /* Cor vermelha ao passar o mouse */
            }

        /* O restante dos estilos... (omitido para brevidade, mas você deve manter o seu CSS original) */

        h2 {
            color: #0d6efd;
            font-weight: 700;
        }

        .btn-primary {
            font-weight: 600;
        }

        .text-primary i {
            margin-right: 5px;
            color: #0d6efd;
        }

        .my-compact-3 {
            margin-top: 0.75rem !important;
            margin-bottom: 0.75rem !important;
        }

        .my-compact-2 {
            margin-top: 0.5rem !important;
            margin-bottom: 0.5rem !important;
        }

        .input-validation-error {
            border: 1px solid #dc3545 !important;
        }

        .field-validation-error {
            color: #dc3545;
            font-size: 0.85em;
            display: block;
            margin-top: 2px;
        }
    </style>
</head>
<body>

    <div class="register-card">

        <a asp-action="Index" asp-controller="Home" class="close-btn-top text-decoration-none" title="Fechar Formulário">
            <i class="fa-solid fa-times">x</i>
        </a>

        <h2 class="text-center mb-3">✍️ Registo de Novo Utente</h2>
        <p class="text-muted text-center mb-4">Preencha as suas credenciais e os dados pessoais.</p>

        @if (TempData["ErrorMessage"] != null)
        {
            <div class="alert alert-danger alert-dismissible fade show m-4" role="alert">
                <i class="bi bi-check-circle me-2"></i>
                @TempData["ErrorMessage"]
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }

        @if (TempData["SuccessMessage"] != null)
        {
            <div class="alert alert-success alert-dismissible fade show m-4" role="alert">
                <i class="bi bi-check-circle me-2"></i>
                @TempData["SuccessMessage"]
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }

        <form asp-action="CriarContaUtente" asp-controller="Login" method="POST">

            <input type="hidden" name="tipoUtilizador" value="Utente">

            <hr class="mb-3">

            <h5 class="text-primary mb-2"><i class="fa-solid fa-lock"></i> Credenciais de Acesso</h5>
            <div class="row mb-3 g-3">
                <div class="col-12">
                    <span asp-validation-for="EmailAcesso" class="text-danger"></span><br/>
                    <label asp-for="EmailAcesso" for="emailAcesso" class="form-label">Email de Acesso (Login)</label>
                    <input asp-for="EmailAcesso" type="email" class="form-control" id="emailAcesso" placeholder="seu.email@exemplo.com">
                    <span class="text-danger small"></span> <div class="form-text mt-1">Este email será a sua chave única de acesso ao sistema.</div>
                </div>
                <div class="col-md-6">
                    <label asp-for="PalavraPasse" for="palavraPasse" class="form-label">Palavra-Passe</label><br/>
                    <span asp-validation-for="PalavraPasse" class="text-danger"></span>
                    <input asp-for="PalavraPasse" type="password" class="form-control" id="palavraPasse" minlength="6" placeholder="Mínimo 6 caracteres">
                    <span class="text-danger small"></span>
                </div>
                <div class="col-md-6">
                    <label asp-for="ConfirmarPalavraPasse" for="confirmarPalavraPasse" class="form-label">Confirmar Palavra-Passe</label><br/>
                    <span asp-validation-for="ConfirmarPalavraPasse" class="text-danger"></span>
                    <input asp-for="ConfirmarPalavraPasse" type="password" class="form-control" id="confirmarPalavraPasse" placeholder="Repita a palavra-passe">
                    <span class="text-danger small"></span>
                </div>
            </div>

            <hr class="my-compact-3">

            <h5 class="text-primary mb-2"><i class="fa-solid fa-address-card"></i> Dados Pessoais</h5>
            <div class="row mb-3 g-3">
                <div class="col-md-6">
                    <label asp-for="Nome" for="nome" class="form-label">Nome Completo</label><br/>
                    <span asp-validation-for="Nome" class="text-danger"></span>
                    <input asp-for="Nome" type="text" class="form-control" id="nome" minlength="2" placeholder="Nome do Utente">
                    <span class="text-danger small"></span>
                </div>
                <div class="col-md-6">
                    <label asp-for="DataNascimento" for="dataNascimento" class="form-label">Data de Nascimento</label><br/>
                    <span asp-validation-for="DataNascimento" class="text-danger"></span>
                    <input asp-for="DataNascimento" type="date" class="form-control" id="dataNascimento" max="2025-12-01">
                    <span class="text-danger small"></span>
                </div>
            </div>

            <h5 class="text-primary my-compact-2"><i class="fa-solid fa-phone"></i> Contacto</h5>
            <div class="row mb-3 g-3">
                <div class="col-md-6">
                    <label asp-for="Telefone" for="telefone" class="form-label">Telefone</label><br/>
                    <span asp-validation-for="Telefone" class="text-danger"></span>
                    <input asp-for="Telefone" type="tel" class="form-control" id="telefone" placeholder="+244 9XX XXX XXX">
                    <span class="text-danger small"></span>
                </div>
            </div>

            <hr class="my-compact-3">

            <h5 class="text-primary my-compact-2"><i class="fa-solid fa-location-dot"></i> Endereço</h5>
            <div class="row mb-3 g-3">
                <div class="col-12">
                    <label asp-for="Morada" for="morada" class="form-label">Morada Completa</label><br/>
                    <span asp-validation-for="Morada" class="text-danger"></span>
                    <input asp-for="Morada" type="text" class="form-control" id="morada" placeholder="Rua, número e andar">
                    <span class="text-danger small"></span>
                </div>
            </div>

            <div class="row mb-3 g-3">
                <div class="col-md-6">
                    <label asp-for="CodigoPostal" for="codigoPostal" class="form-label">Código Postal</label><br/>
                    <span asp-validation-for="CodigoPostal" class="text-danger"></span>
                    <input asp-for="CodigoPostal" type="text" class="form-control" id="codigoPostal" pattern="[0-9]{4}-[0-9]{3}" placeholder="0000-000">
                    <div class="form-text mt-1">Formato esperado: 0000-000</div>
                    <span class="text-danger small"></span>
                </div>
                <div class="col-md-6">
                    <label asp-for="Localidade" for="localidade" class="form-label">Localidade</label><br/>
                    <span asp-validation-for="Localidade"></span>
                    <input asp-for="Localidade" type="text" class="form-control" id="localidade" placeholder="Cidade ou Vila">
                    <span class="text-danger small"></span>
                </div>
            </div>

            <hr class="my-compact-3">

            <h5 class="text-primary my-compact-2"><i class="fa-solid fa-hospital"></i> Informações Administrativas</h5>
            <div class="row mb-4 g-3">
                <div class="col-md-6">
                    <label asp-for="NumeroUtente" for="numeroUtente" class="form-label">Número de BI</label><br/>
                    <span asp-validation-for="NumeroUtente" class="text-danger"></span>
                    <input asp-for="NumeroUtente" type="text" class="form-control" id="numeroUtente" placeholder="Número de Identificação do Utente">
                    <span class="text-danger small"></span>
                </div>
                <div class="col-md-6">
                    <label asp-for="EntidadeFinanciadora" for="entidadeFinanciadora" class="form-label">Entidade Financiadora (Seguro)</label><br/>
                    <span asp-validation-for="EntidadeFinanciadora" class="text-danger"></span>
                    <input asp-for="EntidadeFinanciadora" type="text" class="form-control" id="entidadeFinanciadora" placeholder="Ex: SNS, Médis, Multicare, etc.">
                    <span class="text-danger small"></span>
                </div>
            </div>

            <div class="d-grid mb-2">
                <button type="submit" class="btn btn-primary btn-lg">
                    <i class="fa-solid fa-user-plus"></i> Criar Conta Utente
                </button>
            </div>

        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

</body>
</html>